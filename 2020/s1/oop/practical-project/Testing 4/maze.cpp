#include <iostream>
#include <stdlib.h>
#include "maze.h"
#include "score.h"

using namespace std;

Maze::Maze(int rowSize, int columnSize)
{
	wall=0;
	space=2;
	pellet=1;
	pac=3;
	red=4;
	blue=5;
	pink=6;
	orange=7;
	superpellet=8;

	pelletsNumber=0;

	columns=columnSize;
	rows=rowSize;

	int i,j;
	int random;



	int maze1[31][28]=
	{
		{0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0},
		{0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0},
		{0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0},
		{0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0},
		{0,1,1,1,1,8,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,8,1,1,1,1,0},
		{0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0},
		{0,1,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0},
		{0,1,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0,0,1,0},
		{0,1,0,0,1,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,1,0,0,1,0},
		{0,1,0,0,1,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,1,0,0,1,0},
		{0,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,0},
		{0,1,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,2,0,0,1,0,0,0,0,1,0},
		{0,1,0,0,0,0,1,0,0,2,0,2,2,2,2,2,2,0,2,0,0,1,0,0,0,0,1,0},
		{0,1,0,0,0,0,1,0,0,2,0,2,4,5,6,7,2,0,2,0,0,1,0,0,0,0,1,0},
		{0,1,1,1,1,1,1,0,0,2,0,2,2,2,2,2,2,0,2,0,0,1,1,1,1,1,1,0},
		{0,2,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,2,0,0,1,0,0,0,0,1,0},
		{0,2,0,0,0,0,1,0,0,2,2,2,2,2,2,2,2,2,2,0,0,1,0,0,0,0,1,0},
		{2,2,2,2,0,0,1,0,0,2,0,0,0,0,0,0,0,0,2,0,0,1,0,0,2,2,2,2},
		{0,0,0,2,0,0,1,0,0,2,0,0,0,0,0,0,0,0,2,0,0,1,0,0,2,0,0,0},
		{0,0,0,2,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,2,0,0,0},
		{2,2,2,2,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,2,2,2,2},
		{0,2,0,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,2,0},
		{0,2,0,0,0,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,1,0,0,0,0,2,0},
		{0,1,1,1,1,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,1,1,1,1,0},
		{0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0},
		{0,1,0,0,1,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,1,0,0,1,0},
		{0,1,0,0,1,8,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,8,1,0,0,1,0},
		{0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0},
		{0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0},
		{0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0},
		{0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0}
	};

	maze= new int*[rows];
	for(i=0;i<rows;i++){
		maze[i]= new int[columns];
	}

	for(i=0;i<rows;i++){
		for(j=0;j<columns;j++){
			maze[i][j]=maze1[i][j];
			// std::cout << maze[i][j] << " ";
		}
	}


}

void Maze::mazePrinter()
{
	int i;
	int j;

	for(i=0;i<rows;i++){
		for(j=0;j<columns;j++){
			switch(maze[i][j]){
				case 1: //Pellet
				std::cout << ". ";
				break;

				case 0: //Wall
				std::cout << "▒ ";
				break;

				case 2: //Empty Space
				std::cout << "  ";
				break;

				case 3: //Pacman
				std::cout << "C ";
				break;

				case 4: //Red ghost
				std::cout << "R ";
				break;

				case 5: //Blue Ghost
				std::cout << "B ";
				break;

				case 6: //Pink Ghost
				std::cout << "P ";
				break;

				case 7: //Orange Ghost
				std::cout << "O ";
				break;

				case 8:
				std::cout << "§ ";
			}
		}
		std::cout << std::endl;
	}
}

void Maze::mazeUpdate(int row, int column)
{
	int i,j;
	int score;

	for(i=0;i<rows;i++){
		for(j=0;j<columns;j++){
			if(maze[i][j]==pac){
				maze[i][j]=2;
			}
		}
	}
	
	if(maze[row][column]==1){
		score=10;
	}

	maze[row][column]=pac;
}

bool Maze::isWall(int row,int column){
	if(maze[row][column]==0){
		return true;
	}else{
		return false;
	}
}

int Maze::pelletUpdate(){
	int i,j;

	int currentPellets=0;

	for(i=0;i<rows;i++){
		for(j=0;j<columns;j++){
			if(maze[i][j]==1){
				currentPellets++;
			}
		}
	}

	if(currentPellets!=pelletsNumber){
		pelletsNumber=currentPellets;
	}

	return pelletsNumber;
}